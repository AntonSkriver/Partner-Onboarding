import {
  loadPrototypeDb,
  persistPrototypeDb,
  PrototypeDatabase,
  StoredPartner,
  StoredPartnerUser,
} from '@/lib/storage/prototype-db'

const PROTOTYPE_SEED_VERSION = 4

const buildSeedPartners = (): StoredPartner[] => [
  {
    id: 'partner-save-the-children',
    organizationName: 'Save the Children International',
    organizationType: 'ngo',
    logo: '/partners/save-the-children.png',
    description: 'Global NGO focused on ensuring every child has the future they deserve.',
    mission: 'Create sustainable, child-centered programs that improve education and wellbeing worldwide.',
    website: 'https://www.savethechildren.net',
    contactEmail: 'partnerships@savethechildren.org',
    contactPhone: '+45 33 73 20 00',
    country: 'DK',
    languages: ['en', 'da'],
    sdgFocus: ['SDG 4', 'SDG 5', 'SDG 10'],
    createdAt: '2025-01-10T09:00:00.000Z',
    updatedAt: '2025-03-01T10:15:00.000Z',
    isActive: true,
    verificationStatus: 'verified',
  },
  {
    id: 'partner-lego-foundation',
    organizationName: 'LEGO Foundation',
    organizationType: 'commercial',
    logo: '/partners/lego-foundation.png',
    description: 'Philanthropic arm of LEGO Group supporting learning through play.',
    mission: 'Inspire and develop the builders of tomorrow through playful learning experiences.',
    website: 'https://www.legofoundation.com',
    contactEmail: 'partnerships@legofoundation.com',
    contactPhone: '+45 79 50 60 70',
    country: 'DK',
    languages: ['en', 'da'],
    sdgFocus: ['SDG 4', 'SDG 9'],
    createdAt: '2025-01-14T11:30:00.000Z',
    updatedAt: '2025-02-20T13:45:00.000Z',
    isActive: true,
    verificationStatus: 'verified',
  },
  {
    id: 'partner-unicef',
    organizationName: 'UNICEF Learning Lab',
    organizationType: 'ngo',
    logo: '/partners/unicef.png',
    description: 'UN agency delivering development programs with a focus on education equity.',
    mission: 'Advance children’s rights and equitable access to transformative learning programmes.',
    website: 'https://www.unicef.org',
    contactEmail: 'learninglab@unicef.org',
    contactPhone: '+41 22 909 50 11',
    country: 'CH',
    languages: ['en', 'fr', 'es'],
    sdgFocus: ['SDG 4', 'SDG 16', 'SDG 17'],
    createdAt: '2025-01-18T08:45:00.000Z',
    updatedAt: '2025-02-25T09:20:00.000Z',
    isActive: true,
    verificationStatus: 'verified',
  },
  {
    id: 'partner-alm-brand',
    organizationName: 'Alm. Brand Foundation',
    organizationType: 'foundation',
    logo: '/partners/alm-brand.png',
    description: 'Danish sponsor supporting community wellbeing and resilience initiatives in schools.',
    mission: 'Invest in programmes that strengthen communities and empower young people to thrive together.',
    website: 'https://www.almbrand.dk',
    contactEmail: 'partnerships@almbrand.dk',
    contactPhone: '+45 35 47 47 47',
    country: 'DK',
    languages: ['da', 'en'],
    sdgFocus: ['SDG 3', 'SDG 11'],
    createdAt: '2025-01-12T08:30:00.000Z',
    updatedAt: '2025-03-02T09:45:00.000Z',
    isActive: true,
    verificationStatus: 'verified',
  },
]

const buildSeedPartnerUsers = (): StoredPartnerUser[] => [
  {
    id: 'partner-user-stc-director',
    partnerId: 'partner-save-the-children',
    email: 'director@savethechildren.org',
    firstName: 'Amara',
    lastName: 'Jensen',
    role: 'admin',
    hasAcceptedTerms: true,
    twoFactorEnabled: true,
    createdAt: '2025-01-10T09:05:00.000Z',
    lastLoginAt: '2025-03-03T07:55:00.000Z',
    isActive: true,
  },
  {
    id: 'partner-user-lego-lead',
    partnerId: 'partner-save-the-children',
    email: 'partnerships@legofoundation.com',
    firstName: 'Luca',
    lastName: 'Villadsen',
    role: 'collaborator',
    hasAcceptedTerms: true,
    twoFactorEnabled: false,
    createdAt: '2025-01-14T11:32:00.000Z',
    lastLoginAt: '2025-02-28T12:05:00.000Z',
    isActive: true,
  },
  {
    id: 'partner-user-unicef-coordination',
    partnerId: 'partner-unicef',
    email: 'coordinator@unicef.org',
    firstName: 'Naila',
    lastName: 'Rahman',
    role: 'collaborator',
    hasAcceptedTerms: true,
    twoFactorEnabled: true,
    createdAt: '2025-01-18T08:50:00.000Z',
    lastLoginAt: '2025-03-02T09:30:00.000Z',
    isActive: true,
  },
  {
    id: 'partner-user-almbrand-sponsor',
    partnerId: 'partner-alm-brand',
    email: 'community@almbrand.dk',
    firstName: 'Mette',
    lastName: 'Hansen',
    role: 'collaborator',
    hasAcceptedTerms: true,
    twoFactorEnabled: false,
    createdAt: '2025-01-19T09:10:00.000Z',
    lastLoginAt: '2025-02-28T14:20:00.000Z',
    isActive: true,
  },
]

const buildSeedPrograms = (): PrototypeDatabase['programs'] => [
  {
    id: 'program-build-the-change-2025',
    partnerId: 'partner-lego-foundation',
    displayTitle: 'Save the Children x LEGO: Build the Change',
    name: 'Build the Change',
    marketingTagline: 'Playful design labs where children imagine sustainable futures with LEGO bricks.',
    description:
      'Build the Change empowers children, primarily aged 6–13, to imagine and build solutions for a better, more sustainable future. Through creative workshops using LEGO bricks, children explore real-world environmental challenges and express their ideas for change. The programme is rooted in Learning through Play, fostering engagement, critical thinking, collaboration, and creative problem-solving. This playful, hands-on approach links learning to real-life experiences, giving children a voice while developing key cognitive and emotional skills.',
    projectTypes: ['collaborative_project', 'stem_challenge', 'art_project'],
    pedagogicalFramework: ['steam', 'pbl', 'design_thinking'],
    learningGoals:
      'Nurture creativity and agency by guiding children to prototype sustainable solutions, document their thinking, and present stories of impact to their communities.',
    targetAgeRanges: ['6-8', '9-11', '12-14'],
    countriesInScope: ['DK', 'IT', 'MX', 'BR'],
    sdgFocus: [4, 11, 13],
    supportingPartnerId: 'partner-lego-foundation',
    supportingPartnerRole: 'co_host',
    startDate: '2025-01-10',
    endDate: '2025-12-20',
    programUrl: 'https://prototype.class2class.org/programs/build-the-change',
    brandColor: '#F0B90B',
    logo: '/programs/build-the-change/logo.svg',
    status: 'active',
    isPublic: true,
    createdAt: '2025-01-05T08:00:00.000Z',
    updatedAt: '2025-03-05T12:10:00.000Z',
    createdBy: 'partner-user-stc-director',
  },
  {
    id: 'program-communities-2025',
    partnerId: 'partner-unicef',
    displayTitle: 'UNICEF x Alm. Brand: Communities in Focus',
    name: 'Communities in Focus',
    marketingTagline: 'Design-thinking projects that strengthen school communities across borders.',
    description:
      'Each class works, within the Communities theme, to investigate a local case or challenge that affects their students’ well-being or sense of community at school. Students conduct surveys, gather stories, and share findings with partner classrooms before prototyping actions that build stronger communities.',
    projectTypes: ['collaborative_project', 'service_learning', 'social_impact'],
    pedagogicalFramework: ['design_thinking', 'pbl', 'global_citizenship'],
    learningGoals:
      'Guide students through an empathy-driven, iterative design process where they define community challenges, co-create solutions, and act on their findings with partner schools.',
    targetAgeRanges: ['12-14', '15-18'],
    countriesInScope: ['DK', 'MX', 'IT'],
    sdgFocus: [3, 4, 11],
    supportingPartnerId: 'partner-alm-brand',
    supportingPartnerRole: 'sponsor',
    startDate: '2025-02-01',
    endDate: '2025-12-10',
    programUrl: 'https://prototype.class2class.org/programs/communities-in-focus',
    brandColor: '#5B8DEF',
    logo: '/programs/communities-in-focus/logo.svg',
    status: 'active',
    isPublic: true,
    createdAt: '2025-01-20T09:00:00.000Z',
    updatedAt: '2025-03-06T11:15:00.000Z',
    createdBy: 'partner-user-unicef-coordination',
  },
]

const buildSeedProgramPartners = (): PrototypeDatabase['programPartners'] => [
  {
    id: 'program-partner-build-change-host',
    programId: 'program-build-the-change-2025',
    partnerId: 'partner-save-the-children',
    role: 'host',
    permissions: {
      canEditProgram: true,
      canInviteCoordinators: true,
      canViewAllData: true,
      canManageProjects: true,
      canRemoveParticipants: true,
    },
    invitedBy: 'partner-user-stc-director',
    invitedAt: '2025-01-05T08:05:00.000Z',
    status: 'accepted',
    acceptedAt: '2025-01-05T08:05:00.000Z',
    createdAt: '2025-01-05T08:05:00.000Z',
    updatedAt: '2025-03-05T12:10:00.000Z',
  },
  {
    id: 'program-partner-build-change-lego',
    programId: 'program-build-the-change-2025',
    partnerId: 'partner-lego-foundation',
    role: 'co_host',
    permissions: {
      canEditProgram: true,
      canInviteCoordinators: true,
      canViewAllData: true,
      canManageProjects: true,
      canRemoveParticipants: false,
    },
    invitedBy: 'partner-user-lego-lead',
    invitedAt: '2025-01-06T09:20:00.000Z',
    status: 'accepted',
    acceptedAt: '2025-01-06T11:45:00.000Z',
    createdAt: '2025-01-06T09:20:00.000Z',
    updatedAt: '2025-02-18T07:55:00.000Z',
  },
  {
    id: 'program-partner-communities-host',
    programId: 'program-communities-2025',
    partnerId: 'partner-unicef',
    role: 'host',
    permissions: {
      canEditProgram: true,
      canInviteCoordinators: true,
      canViewAllData: true,
      canManageProjects: true,
      canRemoveParticipants: true,
    },
    invitedBy: 'partner-user-unicef-coordination',
    invitedAt: '2025-01-20T09:05:00.000Z',
    status: 'accepted',
    acceptedAt: '2025-01-20T09:05:00.000Z',
    createdAt: '2025-01-20T09:05:00.000Z',
    updatedAt: '2025-03-06T11:15:00.000Z',
  },
  {
    id: 'program-partner-communities-alm',
    programId: 'program-communities-2025',
    partnerId: 'partner-alm-brand',
    role: 'sponsor',
    permissions: {
      canEditProgram: false,
      canInviteCoordinators: true,
      canViewAllData: true,
      canManageProjects: false,
      canRemoveParticipants: false,
    },
    invitedBy: 'partner-user-unicef-coordination',
    invitedAt: '2025-01-21T08:20:00.000Z',
    status: 'accepted',
    acceptedAt: '2025-01-22T07:45:00.000Z',
    createdAt: '2025-01-21T08:20:00.000Z',
    updatedAt: '2025-02-28T10:30:00.000Z',
  },
]

const buildSeedCoordinators = (): PrototypeDatabase['coordinators'] => [
  {
    id: 'coordinator-build-change-brazil',
    programId: 'program-build-the-change-2025',
    userId: 'partner-user-lego-lead',
    country: 'BR',
    region: 'São Paulo',
    email: 'buildchange.br@legofoundation.org',
    firstName: 'Renata',
    lastName: 'Silva',
    phoneNumber: '+55 11 5555 4321',
    status: 'active',
    invitedBy: 'partner-user-lego-lead',
    invitedAt: '2025-01-12T10:15:00.000Z',
    acceptedAt: '2025-01-13T08:00:00.000Z',
    createdAt: '2025-01-12T10:15:00.000Z',
    updatedAt: '2025-03-01T09:30:00.000Z',
  },
  {
    id: 'coordinator-build-change-india',
    programId: 'program-build-the-change-2025',
    userId: 'partner-user-stc-director',
    country: 'IN',
    region: 'Karnataka',
    email: 'buildchange.in@savethechildren.org',
    firstName: 'Anika',
    lastName: 'Rao',
    phoneNumber: '+91 80 1234 5678',
    status: 'invited',
    invitedBy: 'partner-user-lego-lead',
    invitedAt: '2025-02-05T07:30:00.000Z',
    createdAt: '2025-02-05T07:30:00.000Z',
    updatedAt: '2025-02-20T09:00:00.000Z',
  },
  {
    id: 'coordinator-communities-denmark',
    programId: 'program-communities-2025',
    userId: 'partner-user-unicef-coordination',
    country: 'DK',
    region: 'Capital Region',
    email: 'communities.dk@unicef.org',
    firstName: 'Mads',
    lastName: 'Lund',
    phoneNumber: '+45 33 77 66 55',
    status: 'active',
    invitedBy: 'partner-user-unicef-coordination',
    invitedAt: '2025-01-24T09:45:00.000Z',
    acceptedAt: '2025-01-24T11:00:00.000Z',
    createdAt: '2025-01-24T09:45:00.000Z',
    updatedAt: '2025-03-03T08:30:00.000Z',
  },
  {
    id: 'coordinator-communities-mexico',
    programId: 'program-communities-2025',
    userId: 'partner-user-almbrand-sponsor',
    country: 'MX',
    region: 'Nuevo León',
    email: 'communities.mx@almbrand.dk',
    firstName: 'Alejandra',
    lastName: 'Treviño',
    phoneNumber: '+52 81 0000 8899',
    status: 'invited',
    invitedBy: 'partner-user-unicef-coordination',
    invitedAt: '2025-02-15T10:20:00.000Z',
    createdAt: '2025-02-15T10:20:00.000Z',
    updatedAt: '2025-03-01T07:50:00.000Z',
  },
]

const buildSeedInstitutions = (): PrototypeDatabase['institutions'] => [
  {
    id: 'institution-punti-luce-palermo',
    programId: 'program-build-the-change-2025',
    coordinatorId: 'coordinator-build-change-brazil',
    name: 'Punto Luce Palermo',
    type: 'primary_school',
    country: 'IT',
    region: 'Sicilia',
    city: 'Palermo',
    address: 'Via Regione Siciliana 20',
    contactEmail: 'coordinamento@puntolucepalermo.it',
    contactPhone: '+39 091 555 2233',
    principalName: 'Chiara Romano',
    principalEmail: 'chiara.romano@puntolucepalermo.it',
    studentCount: 420,
    teacherCount: 28,
    educationLevels: ['primary'],
    languages: ['it'],
    status: 'active',
    invitedAt: '2025-02-05T13:00:00.000Z',
    joinedAt: '2025-02-07T10:45:00.000Z',
    createdAt: '2025-02-05T13:00:00.000Z',
    updatedAt: '2025-03-01T09:35:00.000Z',
  },
  {
    id: 'institution-mexico-city-creative',
    programId: 'program-build-the-change-2025',
    coordinatorId: 'coordinator-build-change-brazil',
    name: 'Escuela Creativa CDMX',
    type: 'primary_school',
    country: 'MX',
    region: 'Ciudad de México',
    city: 'Mexico City',
    address: 'Av. Reforma 300',
    contactEmail: 'contacto@escuelacreativacdmx.mx',
    contactPhone: '+52 55 5555 1234',
    principalName: 'Carla Hernández',
    principalEmail: 'carla@escuelacreativacdmx.mx',
    studentCount: 520,
    teacherCount: 36,
    educationLevels: ['primary'],
    languages: ['es', 'en'],
    status: 'active',
    invitedAt: '2025-02-08T09:20:00.000Z',
    joinedAt: '2025-02-10T08:00:00.000Z',
    createdAt: '2025-02-08T09:20:00.000Z',
    updatedAt: '2025-02-27T11:10:00.000Z',
  },
  {
    id: 'institution-sao-paulo-makerspace',
    programId: 'program-build-the-change-2025',
    coordinatorId: 'coordinator-build-change-brazil',
    name: 'São Paulo Makerspace School',
    type: 'primary_school',
    country: 'BR',
    region: 'São Paulo',
    city: 'São Paulo',
    address: 'Av. Paulista 1000',
    contactEmail: 'coordinator@spmakers.edu.br',
    contactPhone: '+55 11 4002 8922',
    principalName: 'Camila Nogueira',
    principalEmail: 'camila@spmakers.edu.br',
    studentCount: 420,
    teacherCount: 28,
    educationLevels: ['primary'],
    languages: ['pt', 'en'],
    status: 'active',
    invitedAt: '2025-01-20T09:00:00.000Z',
    joinedAt: '2025-01-22T08:45:00.000Z',
    createdAt: '2025-01-20T09:00:00.000Z',
    updatedAt: '2025-02-15T10:00:00.000Z',
  },
  {
    id: 'institution-copenhagen-playlab',
    programId: 'program-build-the-change-2025',
    coordinatorId: 'coordinator-build-change-brazil',
    name: 'Copenhagen PlayLab',
    type: 'primary_school',
    country: 'DK',
    region: 'Capital Region',
    city: 'Copenhagen',
    address: 'Playful Learning Street 12',
    contactEmail: 'hello@playlab.dk',
    contactPhone: '+45 32 12 56 78',
    principalName: 'Mikkel Sørensen',
    principalEmail: 'mikkel@playlab.dk',
    studentCount: 310,
    teacherCount: 24,
    educationLevels: ['primary'],
    languages: ['da', 'en'],
    status: 'invited',
    invitedAt: '2025-02-10T10:40:00.000Z',
    createdAt: '2025-02-10T10:40:00.000Z',
    updatedAt: '2025-02-18T09:25:00.000Z',
  },
  {
    id: 'institution-aarhus-community-school',
    programId: 'program-communities-2025',
    coordinatorId: 'coordinator-communities-denmark',
    name: 'Aarhus Community School',
    type: 'high_school',
    country: 'DK',
    region: 'Central Denmark',
    city: 'Aarhus',
    address: 'Community Square 4',
    contactEmail: 'kontakt@aarhuscommunity.dk',
    contactPhone: '+45 86 12 34 56',
    principalName: 'Signe Møller',
    principalEmail: 'signe@aarhuscommunity.dk',
    studentCount: 540,
    teacherCount: 42,
    educationLevels: ['secondary'],
    languages: ['da', 'en'],
    status: 'active',
    invitedAt: '2025-02-05T11:15:00.000Z',
    joinedAt: '2025-02-06T09:20:00.000Z',
    createdAt: '2025-02-05T11:15:00.000Z',
    updatedAt: '2025-03-02T10:05:00.000Z',
  },
  {
    id: 'institution-monterrey-community-studio',
    programId: 'program-communities-2025',
    coordinatorId: 'coordinator-communities-mexico',
    name: 'Monterrey Community Studio',
    type: 'secondary_school',
    country: 'MX',
    region: 'Nuevo León',
    city: 'Monterrey',
    address: 'Av. Constitución 155',
    contactEmail: 'info@comunidadstudio.mx',
    contactPhone: '+52 81 1234 5678',
    principalName: 'Javier Luna',
    principalEmail: 'javier@comunidadstudio.mx',
    studentCount: 480,
    teacherCount: 35,
    educationLevels: ['secondary'],
    languages: ['es', 'en'],
    status: 'invited',
    invitedAt: '2025-02-18T08:40:00.000Z',
    createdAt: '2025-02-18T08:40:00.000Z',
    updatedAt: '2025-02-28T12:00:00.000Z',
  },
]

const buildSeedTeachers = (): PrototypeDatabase['institutionTeachers'] => [
  {
    id: 'teacher-sp-makers-lucas',
    institutionId: 'institution-sao-paulo-makerspace',
    programId: 'program-build-the-change-2025',
    email: 'lucas.souza@spmakers.edu.br',
    firstName: 'Lucas',
    lastName: 'Souza',
    subject: 'Environmental Science',
    gradeLevel: 'Primary',
    yearsExperience: 5,
    status: 'active',
    invitedAt: '2025-01-22T09:15:00.000Z',
    acceptedAt: '2025-01-22T11:30:00.000Z',
    createdAt: '2025-01-22T09:15:00.000Z',
    updatedAt: '2025-03-01T08:20:00.000Z',
  },
  {
    id: 'teacher-puntoluce-sara',
    institutionId: 'institution-punti-luce-palermo',
    programId: 'program-build-the-change-2025',
    email: 'sara.ricci@puntolucepalermo.it',
    firstName: 'Sara',
    lastName: 'Ricci',
    subject: 'Playful Learning',
    gradeLevel: 'Primary',
    yearsExperience: 6,
    status: 'active',
    invitedAt: '2025-01-25T09:30:00.000Z',
    acceptedAt: '2025-01-25T12:00:00.000Z',
    createdAt: '2025-01-25T09:30:00.000Z',
    updatedAt: '2025-03-03T07:55:00.000Z',
  },
  {
    id: 'teacher-cdmx-diego',
    institutionId: 'institution-mexico-city-creative',
    programId: 'program-build-the-change-2025',
    email: 'diego.martinez@escuelacreativacdmx.mx',
    firstName: 'Diego',
    lastName: 'Martínez',
    subject: 'Sustainability Lab',
    gradeLevel: 'Primary',
    yearsExperience: 4,
    status: 'invited',
    invitedAt: '2025-02-12T08:10:00.000Z',
    createdAt: '2025-02-12T08:10:00.000Z',
    updatedAt: '2025-02-26T09:45:00.000Z',
  },
  {
    id: 'teacher-aarhus-anne',
    institutionId: 'institution-aarhus-community-school',
    programId: 'program-communities-2025',
    email: 'anne.holm@aarhuscommunity.dk',
    firstName: 'Anne',
    lastName: 'Holm',
    subject: 'Social Studies',
    gradeLevel: 'Secondary',
    yearsExperience: 9,
    status: 'active',
    invitedAt: '2025-02-06T10:25:00.000Z',
    acceptedAt: '2025-02-06T12:10:00.000Z',
    createdAt: '2025-02-06T10:25:00.000Z',
    updatedAt: '2025-03-02T08:45:00.000Z',
  },
  {
    id: 'teacher-monterrey-jorge',
    institutionId: 'institution-monterrey-community-studio',
    programId: 'program-communities-2025',
    email: 'jorge.ramirez@comunidadstudio.mx',
    firstName: 'Jorge',
    lastName: 'Ramírez',
    subject: 'Community Projects',
    gradeLevel: 'Secondary',
    yearsExperience: 7,
    status: 'invited',
    invitedAt: '2025-02-18T09:10:00.000Z',
    createdAt: '2025-02-18T09:10:00.000Z',
    updatedAt: '2025-02-28T11:40:00.000Z',
  },
  {
    id: 'teacher-aarhus-anne-build-change',
    institutionId: 'institution-aarhus-community-school',
    programId: 'program-build-the-change-2025',
    email: 'anne.holm@aarhuscommunity.dk',
    firstName: 'Anne',
    lastName: 'Holm',
    subject: 'Social Studies',
    gradeLevel: 'Secondary',
    yearsExperience: 9,
    status: 'active',
    invitedAt: '2025-02-01T09:15:00.000Z',
    acceptedAt: '2025-02-01T11:20:00.000Z',
    createdAt: '2025-02-01T09:15:00.000Z',
    updatedAt: '2025-03-01T10:30:00.000Z',
  },
]

const buildSeedProjects = (): PrototypeDatabase['programProjects'] => [
  {
    id: 'program-project-build-change-city',
    programId: 'program-build-the-change-2025',
    projectId: 'project-build-change-city',
    templateId: 'template-build-change-city-guardians',
    createdByType: 'teacher',
    createdById: 'teacher-sp-makers-lucas',
    associatedCoPartnerId: 'program-partner-build-change-lego',
    status: 'active',
    coverImageUrl: 'https://images.unsplash.com/photo-1529101091764-c3526daf38fe?w=800&h=480&fit=crop',
    createdAt: '2025-02-05T13:20:00.000Z',
    updatedAt: '2025-03-01T09:00:00.000Z',
  },
  {
    id: 'program-project-build-change-ocean',
    programId: 'program-build-the-change-2025',
    projectId: 'project-build-change-ocean',
    templateId: 'template-build-change-ocean-stewards',
    createdByType: 'teacher',
    createdById: 'teacher-sp-makers-lucas',
    status: 'draft',
    coverImageUrl: 'https://images.unsplash.com/photo-1499951360447-b19be8fe80f5?w=800&h=480&fit=crop',
    createdAt: '2025-02-18T10:05:00.000Z',
    updatedAt: '2025-02-18T10:05:00.000Z',
  },
  {
    id: 'program-project-build-change-garden',
    programId: 'program-build-the-change-2025',
    projectId: 'project-build-change-garden',
    templateId: 'template-build-change-school-garden',
    createdByType: 'teacher',
    createdById: 'teacher-aarhus-anne-build-change',
    associatedCoPartnerId: 'program-partner-build-change-lego',
    status: 'active',
    coverImageUrl: '/images/lego-garden-school.png',
    createdAt: '2025-02-20T12:30:00.000Z',
    updatedAt: '2025-03-05T09:50:00.000Z',
  },
  {
    id: 'program-project-communities-belonging',
    programId: 'program-communities-2025',
    projectId: 'project-communities-belonging',
    templateId: 'template-communities-belonging-circles',
    createdByType: 'teacher',
    createdById: 'teacher-aarhus-anne',
    status: 'active',
    coverImageUrl: '/images/community-inclusion.png',
    createdAt: '2025-02-15T11:20:00.000Z',
    updatedAt: '2025-03-04T10:15:00.000Z',
  },
  {
    id: 'program-project-communities-action',
    programId: 'program-communities-2025',
    projectId: 'project-communities-action',
    templateId: 'template-communities-action-lab',
    createdByType: 'teacher',
    createdById: 'teacher-monterrey-jorge',
    status: 'draft',
    coverImageUrl: 'https://images.unsplash.com/photo-1506784983877-45594efa4cbe?w=800&h=480&fit=crop',
    createdAt: '2025-03-02T08:15:00.000Z',
    updatedAt: '2025-03-02T08:15:00.000Z',
  },
]

const buildSeedProgramTemplates = (): PrototypeDatabase['programTemplates'] => [
  {
    id: 'template-build-change-city-guardians',
    programId: 'program-build-the-change-2025',
    title: 'City Guardians Workshop',
    summary:
      'Children redesign public spaces using LEGO bricks, focusing on clean energy, green transport, and playful community hubs.',
    heroImageUrl: 'https://images.unsplash.com/photo-1512428559087-560fa5ceab42?w=800&h=480&fit=crop',
    estimatedDurationWeeks: 4,
    recommendedStartMonth: 'September',
    subjectFocus: ['science', 'design'],
    sdgAlignment: [7, 11, 13],
    requiredMaterials: ['LEGO bricks', 'Local city map', 'Storytelling board'],
    languageSupport: ['en', 'pt'],
    isActive: true,
    createdAt: '2025-01-07T09:00:00.000Z',
    updatedAt: '2025-02-21T12:00:00.000Z',
  },
  {
    id: 'template-build-change-ocean-stewards',
    programId: 'program-build-the-change-2025',
    title: 'Ocean Stewards Lab',
    summary:
      'Learners investigate plastic waste issues, prototype cleanup inventions, and pitch campaigns to protect local waterways.',
    heroImageUrl: 'https://images.unsplash.com/photo-1500530855697-b586d89ba3ee?w=800&h=480&fit=crop',
    estimatedDurationWeeks: 3,
    recommendedStartMonth: 'March',
    subjectFocus: ['science', 'civics'],
    sdgAlignment: [6, 12, 14],
    requiredMaterials: ['LEGO bricks', 'Micro:bit kits', 'Interview guides'],
    languageSupport: ['en', 'da', 'pt'],
    isActive: true,
    createdAt: '2025-01-08T10:15:00.000Z',
    updatedAt: '2025-02-12T15:10:00.000Z',
  },
  {
    id: 'template-communities-story-circle',
    programId: 'program-communities-2025',
    title: 'Community Story Circles',
    summary:
      'Students host guided conversations to surface stories about belonging, synthesise insights, and prepare visual narratives to share with partner classes.',
    heroImageUrl: 'https://images.unsplash.com/photo-1500530855697-b586d89ba3ee?w=800&h=480&fit=crop',
    estimatedDurationWeeks: 3,
    recommendedStartMonth: 'February',
    subjectFocus: ['civics', 'language'],
    sdgAlignment: [3, 11],
    requiredMaterials: ['Conversation guides', 'Story cards', 'Digital recorder'],
    languageSupport: ['da', 'es', 'en'],
    isActive: true,
    createdAt: '2025-01-23T09:30:00.000Z',
    updatedAt: '2025-02-28T07:40:00.000Z',
  },
  {
    id: 'template-communities-action-lab',
    programId: 'program-communities-2025',
    title: 'Community Action Lab',
    summary:
      'Classes prototype small actions that strengthen inclusion—such as welcome rituals or peer support systems—and iterate based on feedback from partner schools.',
    heroImageUrl: 'https://images.unsplash.com/photo-1515165562835-c4c2b33a3e60?w=800&h=480&fit=crop',
    estimatedDurationWeeks: 4,
    recommendedStartMonth: 'April',
    subjectFocus: ['design', 'social_sciences'],
    sdgAlignment: [3, 4, 11],
    requiredMaterials: ['Design thinking canvas', 'Feedback forms', 'LEGO bricks'],
    languageSupport: ['en', 'da', 'es'],
    isActive: true,
    createdAt: '2025-01-24T11:10:00.000Z',
    updatedAt: '2025-03-03T08:20:00.000Z',
  },
  {
    id: 'template-build-change-school-garden',
    programId: 'program-build-the-change-2025',
    title: 'Sustainable School Garden',
    summary:
      'Design and create a thriving school garden using LEGO bricks to prototype sustainable solutions. Work with partner classrooms to bring green spaces, renewable energy, and community gardening projects to life in your school.',
    heroImageUrl: '/images/lego-garden-school.png',
    estimatedDurationWeeks: 6,
    recommendedStartMonth: 'September',
    subjectFocus: ['science', 'design', 'sustainability'],
    sdgAlignment: [11, 13, 15],
    requiredMaterials: ['LEGO bricks', 'Garden planning tools', 'Sustainability guides'],
    languageSupport: ['en', 'da'],
    isActive: true,
    createdAt: '2025-01-10T09:00:00.000Z',
    updatedAt: '2025-02-15T10:30:00.000Z',
  },
  {
    id: 'template-communities-belonging-circles',
    programId: 'program-communities-2025',
    title: 'Building Belonging in Our Communities',
    summary:
      'Students explore what makes communities welcoming and inclusive through dialogue, storytelling, and collaborative problem-solving. Partner classrooms work together to identify barriers to belonging and co-create solutions that strengthen community connections and celebrate diversity.',
    heroImageUrl: '/images/community-inclusion.png',
    estimatedDurationWeeks: 5,
    recommendedStartMonth: 'February',
    subjectFocus: ['civics', 'social_sciences', 'language'],
    sdgAlignment: [3, 10, 16],
    requiredMaterials: ['Discussion guides', 'Story collection tools', 'Community mapping materials'],
    languageSupport: ['en', 'da', 'es'],
    isActive: true,
    createdAt: '2025-01-15T10:00:00.000Z',
    updatedAt: '2025-02-20T14:30:00.000Z',
  },
]

const buildSeedInvitations = (): PrototypeDatabase['invitations'] => [
  {
    id: 'invitation-build-change-labcorp',
    programId: 'program-build-the-change-2025',
    invitationType: 'co_partner',
    recipientEmail: 'innovation@labcorp.org',
    recipientName: 'LabCorp Innovation Hub',
    sentBy: 'partner-user-lego-lead',
    sentByType: 'partner',
    customMessage:
      'We would love your creative technologists to mentor our young makers as they design sustainable cities.',
    token: 'c2c_invite_BUILDCHANGE_2025',
    expiresAt: '2025-05-15T23:59:59.000Z',
    status: 'pending',
    sentAt: '2025-03-05T08:30:00.000Z',
    createdAt: '2025-03-05T08:30:00.000Z',
    updatedAt: '2025-03-05T08:30:00.000Z',
    proposedRole: 'advisor',
    proposedPermissions: {
      canEditProgram: false,
      canInviteCoordinators: true,
      canViewAllData: true,
      canManageProjects: false,
      canRemoveParticipants: false,
    },
  },
  {
    id: 'invitation-communities-studentcouncil',
    programId: 'program-communities-2025',
    invitationType: 'coordinator',
    recipientEmail: 'council@aarhuscommunity.dk',
    recipientName: 'Aarhus Student Council',
    sentBy: 'partner-user-unicef-coordination',
    sentByType: 'partner',
    customMessage:
      'We are inviting you to co-lead the community action lab and share student voice from Aarhus with our partner schools.',
    token: 'c2c_invite_COMMUNITY_2025',
    expiresAt: '2025-04-30T23:59:59.000Z',
    status: 'pending',
    sentAt: '2025-03-04T10:00:00.000Z',
    createdAt: '2025-03-04T10:00:00.000Z',
    updatedAt: '2025-03-04T10:00:00.000Z',
    assignedCountry: 'DK',
    assignedRegion: 'Central Denmark',
  },
]

const buildSeedActivities = (): PrototypeDatabase['activities'] => [
  {
    id: 'activity-2025-02-12-build-change',
    programId: 'program-build-the-change-2025',
    type: 'project_created',
    actorName: 'Sara Ricci',
    actorType: 'teacher',
    description: 'Punto Luce Palermo students unveiled prototype models for their “City Guardians” playground redesign.',
    timestamp: '2025-02-12T15:20:00.000Z',
  },
  {
    id: 'activity-2025-02-28-build-change',
    programId: 'program-build-the-change-2025',
    type: 'institution_joined',
    actorName: 'Escuela Creativa CDMX',
    actorType: 'partner',
    description: 'CDMX Creative School activated their Build the Change classroom and scheduled their first design jam.',
    timestamp: '2025-02-28T09:40:00.000Z',
  },
  {
    id: 'activity-2025-03-04-communities',
    programId: 'program-communities-2025',
    type: 'project_created',
    actorName: 'Anne Holm',
    actorType: 'teacher',
    description: 'Aarhus Community School shared story-circle insights with partner classrooms in Monterrey.',
    timestamp: '2025-03-04T11:05:00.000Z',
  },
]

const buildSeedDatabase = (): PrototypeDatabase => {
  const seededAt = new Date().toISOString()

  return {
    partners: buildSeedPartners(),
    partnerUsers: buildSeedPartnerUsers(),
    programs: buildSeedPrograms(),
    programPartners: buildSeedProgramPartners(),
    coordinators: buildSeedCoordinators(),
    institutions: buildSeedInstitutions(),
    institutionTeachers: buildSeedTeachers(),
    programProjects: buildSeedProjects(),
    programTemplates: buildSeedProgramTemplates(),
    invitations: buildSeedInvitations(),
    activities: buildSeedActivities(),
    metadata: {
      version: PROTOTYPE_SEED_VERSION,
      seededAt,
    },
  }
}

interface SeedOptions {
  force?: boolean
}

export const seedPrototypeDb = (options: SeedOptions = {}): {
  seeded: boolean
  reason?: 'already-seeded'
  database: PrototypeDatabase
} => {
  const current = loadPrototypeDb()

  if (!options.force) {
    const alreadySeeded = Boolean(current.metadata.seededAt) || current.programs.length > 0

    if (alreadySeeded) {
      return {
        seeded: false,
        reason: 'already-seeded',
        database: current,
      }
    }
  }

  const seededDb = buildSeedDatabase()
  persistPrototypeDb(seededDb)

  return {
    seeded: true,
    database: seededDb,
  }
}

export const getPrototypeSeedSnapshot = (): PrototypeDatabase => buildSeedDatabase()

export { PROTOTYPE_SEED_VERSION }
